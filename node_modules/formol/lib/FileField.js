(this.webpackJsonpformol=this.webpackJsonpformol||[]).push([[1],{283:function(e,t,a){"use strict";a.r(t);var n=a(7),r=a.n(n),l=a(8),c=a.n(l),i=a(15),s=a.n(i),u=a(13),o=a.n(u),m=a(17),p=a.n(m),d=a(3),v=a.n(d),f=a(4),h=a.n(f),g=a(5),j=a.n(g),y=a(10),b=a.n(y),E=a(2),N=a.n(E),w=a(6),k=a.n(w),C=a(14),x=a.n(C),F=a(24),z=a.n(F),O=a(12),D=a.n(O),P=a(20),R=a(151),T=a(278),S=a(1),A=a.n(S),B=a(16),J=a.n(B),K=a(9),I=Object(K.a)("Preview");function L(e){var t=e.data,a=e.ext,n=e.mime;if("image/svg+xml"===n)a="svg";else{var r=n.split("/");a=o()(r,2)[1]}t="data:".concat(n,";base64,").concat(t);var l=a.toLowerCase();return["pdf","svg"].includes(l)?A.a.createElement("object",{data:t,className:I.m({type:"pdf"})}):["jpg","jpeg","png","gif","tiff"].includes(l)?A.a.createElement("img",{src:t,className:I.m({type:"image"}),alt:a}):null}var M,$,q,G=a(21);a.d(t,"default",function(){return U});var H=function(e){return[e.name,e.ext].join(".")},Q=function(e){return e.reverse().reduce(function(e,t){var a=e.renamed,n=e.counter,r=t.name.replace(/--\d+$/,""),l=H(D()({},t,{name:r})),c=D()({},n,z()({},l,l in n?n[l]+1:0));return{counter:c,renamed:[].concat(x()(a),[D()({},t,{name:c[l]?"".concat(r,"--").concat(c[l]):r})])}},{renamed:[],counter:{}}).renamed.reverse()},U=Object(G.a)(M=Object(K.a)((q=$=function(e){function t(e){var a;return v()(this,t),(a=h()(this,j()(t).call(this,e))).state={value:null,rejected:[]},a.handleDrop=a.handleDrop.bind(b()(a)),a.handleRemove=a.handleRemove.bind(b()(a)),a}return k()(t,e),N()(t,null,[{key:"valueToField",value:function(e,t){return e?t?e.map(H).join(","):H(e):""}}]),N()(t,[{key:"fileToObject",value:function(){var e=p()(s.a.mark(function e(t){var a,n,r,l;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(K.c)(t.name),n=o()(a,2),r=n[0],l=n[1],e.t0=r,e.t1=l,e.t2=t.type,e.t3=t.size,e.next=7,Object(K.e)(t);case 7:return e.t4=e.sent.split(",",2)[1],e.abrupt("return",{name:e.t0,ext:e.t1,type:e.t2,size:e.t3,data:e.t4});case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e,t){var a=this.props,n=a.i18n,r=a.multiple;(0,a.onChange)(e,t.length?r?"".concat(n.file.rejectedMultiple," (").concat(t.join(", "),")"):n.file.rejected:"")}},{key:"handleDrop",value:function(){var e=p()(s.a.mark(function e(a,n){var r,l,c,i,u,o,m,p,d,v;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.props,l=r.value,c=r.multiple,i=r.onFocus,u=r.onBlur,o=r.elementRef.current,i(),m=this.state.rejected,n=n.filter(function(e){return e.name}),e.next=6,Promise.all(a.concat(n).map(this.fileToObject));case 6:p=e.sent,n.length&&(m=[].concat(x()(m),x()(p.slice(-n.length).map(H)))),d=c?Q([].concat(x()(p),x()(l))):p[0],v=t.valueToField(d,c),c||(m=m.includes(v)?[v]:[]),o.value=v,this.handleChange(d,m),this.setState({value:v,rejected:m}),u();case 15:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleRemove",value:function(e,a){var n=this.props,r=n.value,l=n.multiple,c=n.elementRef.current,i=n.onFocus,s=n.onBlur;i();var u=l?r.filter(function(e){return H(e)!==H(a)}):null,o=this.state.rejected.filter(function(e){return e!==H(a)}),m=t.valueToField(u,l);c.value=m,this.handleChange(u,o),this.setState({value:m,rejected:o}),e.stopPropagation(),s()}},{key:"renderPreview",value:function(e,t){var a=this,n=this.props,r=n.disabled,l=n.readOnly,c=this.state.rejected,i=H(t);return A.a.createElement("figure",{className:e.e("preview").m({error:c.includes(i)}),key:i},A.a.createElement("div",{className:e.e("image-delete")},A.a.createElement(L,{data:t.data,mime:t.type,ext:t.ext}),l||r?null:A.a.createElement("button",{className:e.e("close"),onClick:function(e){return a.handleRemove(e,t)},type:"button"},A.a.createElement(P.d,null)," Enlever")),A.a.createElement("figcaption",{className:e.e("preview-caption")},A.a.createElement("span",{className:e.e("preview-name")},i),t.size&&A.a.createElement("span",{className:e.e("preview-size")},Object(K.b)(t.size)),t.type&&A.a.createElement("span",{className:e.e("preview-type")},t.type)))}},{key:"render",value:function(e){var a=this,n=this.props,l=n.name,i=n.value,s=n.i18n,u=n.accept,o=n.placeholder,m=n.className,p=n.multiple,d=n.readOnly,v=n.disabled,f=n.elementRef,h=(n.onChange,n.onKeyDown,c()(n,["name","value","i18n","accept","placeholder","className","multiple","readOnly","disabled","elementRef","onChange","onKeyDown"])),g=this.state.rejected,j=null;return p?j=A.a.createElement("div",{className:e.e("previews")},i.map(function(t){return a.renderPreview(e,t)})):i&&(j=this.renderPreview(e,i)),d||v?A.a.createElement("div",{className:e.mix(m)},j||s.file.noFile):A.a.createElement("div",{className:e.m({invalid:!!g.length})},A.a.createElement(T.a,{accept:u||"image/*",className:e.e("dropzone").s,activeClassName:e.e("dropzone").m({active:!0}).s,acceptClassName:e.e("dropzone").m({accept:!0}).s,rejectClassName:e.e("dropzone").m({reject:!0}).s,disabledClassName:e.e("dropzone").m({disabled:!0}).s,name:l,multiple:p,onDrop:this.handleDrop},function(t){var a=t.getRootProps,n=t.getInputProps,l=t.isDragActive;return A.a.createElement("div",r()({},a(),{className:e.e("dropzone-wrapper").m({isDragActive:l})}),"ï¿¼ ",A.a.createElement("input",n()),A.a.createElement("div",{className:e.e("placeholder")},!p&&j?j:A.a.createElement(A.a.Fragment,null,A.a.createElement(R.a,null),A.a.createElement("span",null,o))))}),p&&j,A.a.createElement("input",r()({className:e.mix(m).e("hidden-input"),ref:f},h,{value:t.valueToField(i,p),onChange:K.d,type:"text"})))}}],[{key:"getDerivedStateFromProps",value:function(e,a){var n=a.value,r=a.rejected,l=e.multiple,c=e.elementRef.current,i=e.value,s=t.valueToField(i,l);if(!J()(s,n)){var u=r.filter(function(e){return l?s.split(",").includes(e):s===e});return c&&(c.value=s),{value:s,rejected:u}}return null}}]),t}(A.a.PureComponent),$.displayName="FileField",M=q))||M)||M}}]);